<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <!-- 引入 Bootstrap 样式 -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css">
</head>
<body>
<div id="app" class="container mt-5">
  <div class="card">
    <div class="card-header">
      Login
    </div>
    <div class="card-body">
      <form>
        <div class="form-group">
          <label for="username">Username:</label>
          <input type="text" id="username" class="form-control" v-model="username" required>
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="password" class="form-control" v-model="password" required>
        </div>
        <div class="form-group">
          <button type="button" class="btn btn-primary" @click="login">Login</button>
        </div>
      </form>
      <div v-if="message" class="alert alert-danger" role="alert">
        {{ message }}
      </div>
    </div>
  </div>
</div>

<!-- 引入 Vue.js -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<!-- 引入 Axios -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
  // 定义一个简单的响应对象
  function Result(code, msg, data) {
    this.code = code;
    this.msg = msg;
    this.data = data;
  }

  new Vue({
    el: '#app',
    data: {
      username: '',
      password: '',
      message: ''
    },
    methods: {
      login: function() {
        // 发送登录请求
        axios.post('/user/login', {
          nickname: this.username,
          password: this.password
        }).then((response) => {
          // 登录成功，保存用户信息到本地存储
          localStorage.setItem('user', JSON.stringify(response.data));
          // 跳转到首页
          window.location.href = '/';
          alert("登录成功，欢迎"+this.username)
        }).catch((error) => {
          // 登录失败，显示错误信息
          this.message = error.response.data.msg;
        });
      }
    }
  });
</script>
</body>
</html>